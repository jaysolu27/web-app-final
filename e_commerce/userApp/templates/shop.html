{% load static %}
<!DOCTYPE html>
<html lang="zxx">
<style>
    .active{
        font-weight: bold;
        color: black !important;
    }
</style>
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Male_Fashion Template">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'admin/assets/img/apple-icon.png' %}">
    <link rel="icon" type="image/png" href="{% static 'admin/assets/img/favicon.png' %}">
    <title>Male-Fashion</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
    rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/elegant-icons.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/nice-select.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/slicknav.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <header class="header">

        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <a href="{% url 'home_page' %}"><img src="{% static 'img/logo.png' %}" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <nav class="header__menu mobile-menu">
                        <ul>
                            <li><a href="{% url 'home_page' %}">Home</a></li>
                            <li class="active"><a href="{% url 'shop_page' %}">Shop</a></li>
                            <li><a href="{% url 'my_orders' %}">Order Details</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="header__nav__option">
                        
                        <a href="{% url 'cart_view' %}"><img src="{% static 'img/icon/cart.png' %}" alt=""> <span>0</span>
                            <div class="price" style="margin-left: 0.6em;">cart</div>
                        </a>
                        <a href="#" style="padding-left: 6em;margin-right: 0.5em;"> <div class="price">{{user_name}}</div></a>
                        <a href="{% url 'logout_page' %}" style="color: inherit;text-decoration: none;"><i style="cursor: pointer;"  class="fas fa-sign-out-alt"></i></a>
                        
                    </div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </header>
    <!-- Header Section End -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Shop</h4>
                        <div class="breadcrumb__links">
                            <a href="{% url 'home_page' %}">Home</a>
                            <span>Shop</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Shop Section Begin -->
    <section class="shop spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="shop__sidebar">
                        <div class="shop__sidebar__search">
                            <form method="post">
                                {% csrf_token %}
                                <input type="text" name="search_text" id="search_text" placeholder="Search...">
                                <button type="submit"><span class="icon_search"></span></button>
                            </form>
                        </div>
                        <div class="shop__sidebar__accordion">
                            <div class="accordion" id="accordionExample">
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                                    </div>
                                    <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__categories">
                                                <ul class="nice-scroll">
                                                    <form method="post">
                                                        {% csrf_token %}
                                                        {% for category in category_lst %}


                                                        {% if cat_p_category__id|add:0 == category.id|add:0 %}
                                      
                                                        <li><a class="active" id="cat_{{ forloop.counter }}" href="{% url 'shop_page' %}?key=p_category__id&val={{category.id}}">
                                                            {{category.c_name}}
                                                          </a></li>
                                                        {% else %}
                                      
                                                        <li><a class="" id="cat_{{ forloop.counter }}" href="{% url 'shop_page' %}?key=p_category__id&val={{category.id}}">
                                                            {{category.c_name}}
                                                          </a></li>
                                                        {% endif %}
                                                        
                                                        {% endfor %}
                                                    </form>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseTwo">Branding</a>
                                    </div>
                                    <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__brand">
                                                <ul>
                                                    {% for brand in brand_lst %}
                                                    {% if brand_p_brand__id|add:0 == brand.id|add:0 %}
                                                    <li><a class="active" href="{% url 'shop_page' %}?key=p_brand__id&val={{brand.id}}">{{brand.b_name}}</a></li>
                                                    {% else %}
                                                    <li><a href="{% url 'shop_page' %}?key=p_brand__id&val={{brand.id}}">{{brand.b_name}}</a></li>
                                                    {% endif %}
                                                    
                                                    
                                                    
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseThree">Filter Price</a>
                                    </div>
                                    <div id="collapseThree" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__price">
                                                <ul>
                                                    {% if val_1 == "all-price" %}
                                                    <li><a class="active" id="all-price" href="{% url 'shop_page' %}?key=p_price&val=all-price">All Price</a></li>
                                                    {% else %}
                                                    <li><a id="all-price" href="{% url 'shop_page' %}?key=p_price&val=all-price">All Price</a></li>
                                                    {% endif %}

                                                    {% if val_1 == "0-1000" %}
                                                    <li><a class="active" id="0-1000" href="{% url 'shop_page' %}?key=p_price&val=0-1000">0 - 1000</a></li>
                                
                                                    {% else %}
                                                    <li><a id="0-1000" href="{% url 'shop_page' %}?key=p_price&val=0-1000">0 - 1000</a></li>
                                                    {% endif %}

                                                    {% if val_1 == "1000-3000" %}
                                                    <li><a class="active" id="1000-3000" href="{% url 'shop_page' %}?key=p_price&val=1000-3000">1000 - 3000</a></li>
                                                    {% else %}
                                                    <li><a id="1000-3000" href="{% url 'shop_page' %}?key=p_price&val=1000-3000">1000 - 3000</a></li>
                                                    {% endif %}

                                                    {% if val_1 == "3000-10000" %}
                                                    <li><a class="active" id="3000-10000" href="{% url 'shop_page' %}?key=p_price&val=3000-10000" >3000 - 10000</a></li>
                                                    {% else %}
                                                    <li><a id="3000-10000" href="{% url 'shop_page' %}?key=p_price&val=3000-10000" >3000 - 10000</a></li>
                                                    {% endif %}

                                                    {% if val_1 == "10000-15000" %}
                                                    <li><a class="active" id="10000-15000" href="{% url 'shop_page' %}?key=p_price&val=10000-15000">10000 - 15000</a></li>
                                                    {% else %}
                                                    <li><a id="10000-15000" href="{% url 'shop_page' %}?key=p_price&val=10000-15000">10000 - 15000</a></li>
                                                    {% endif %}

                                                    {% if val_1 == "15000-20000" %}
                                                    <li><a class="active" id="15000-20000" href="{% url 'shop_page' %}?key=p_price&val=15000-20000">15000 - 20000</a></li>
                                                    {% else %}
                                                    <li><a id="15000-20000" href="{% url 'shop_page' %}?key=p_price&val=15000-20000">15000 - 20000</a></li>
                                                    {% endif %}
                                               
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                               
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="shop__product__option">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <div class="shop__product__option__left">
                                    <p>Showing {{product_cnt}} results</p>
                                </div>
                            </div>
                        
                        </div>
                    </div>
                    <div class="row">
                    {% for item in product_lst %}
                    
                    <div class="col-lg-4 col-md-6 col-sm-6">
                        <div class="product__item sale">
                            <a href="{% url 'product_detail' pk=item.id %}">
                                <div class="product__item__pic set-bg"  data-setbg="{{item.p_img}}">
                            
    
                                </div>
                            </a>
                            
                            <div class="product_item">
                                <a href="{% url 'product_detail' pk=item.id %}" ><h6 style="font-weight: bold;color: black; padding-top: 1em;">{{item.p_name}}</h6></a>
                                
                             
                                <h5>{{item.p_price}}</h5>
                             
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    </div>
                    {% if not product_lst %}

                    <h4>No resutls found..</h4>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
    <!-- Shop Section End -->

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__logo">
                            <a href="#"><img src="{% static 'img/footer-logo.png' %}" alt=""></a>
                        </div>
                        <p>The customer is at the heart of our unique business model, which includes design.</p>
                        <a href="#"><img src="{% static 'img/payment.png' %}" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                    <div class="footer__widget">
                        <ul>
                            <li><a href="{% url 'about_us' %}">About Us</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="footer__widget">
       
                        <ul>
                            <li><a href="{% url 'contact_us' %}">Contact Us</a></li>
         
                        </ul>
                    </div>
                </div>
 
            </div>

        </div>
    </footer>
    <!-- Search End -->
    <script>
        function send_post_request(...args) {
            var csrftoken = getCookie('csrftoken');
            $.ajax({
                type: 'POST',
                url: "{% url 'shop_page' %}",
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: {
                    'filter_params': JSON.stringify(args)
                },
                success: function(data) {
                    console.log(data);
                    
                }
            });
        }


        // Helper function to retrieve the CSRF token value from a cookie
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
                }
            }
            return cookieValue;
            }

        function set_status(counter){
            var curr_id = "cat_"+counter;
            var element = document.getElementById(curr_id);
           
        }
    </script>
        
    <!-- Js Plugins -->
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery.nice-select.min.js' %}"></script>
    <script src="{% static 'js/jquery.nicescroll.min.js' %}"></script>
    <script src="{% static 'js/jquery.magnific-popup.min.js'%}"></script>
    <script src="{% static 'js/jquery.countdown.min.js'%}"></script>
    <script src="{% static 'js/jquery.slicknav.js'%}"></script>
    <script src="{% static 'js/mixitup.min.js'%}"></script>
    <script src="{% static 'js/owl.carousel.min.js'%}"></script>
    <script src="{% static 'js/main.js'%}"></script>
</body>

</html>